const cfg = require('configuration');
const db = require('database');

db.run("CREATE TABLE IF NOT EXISTS Mining "+
	"(endDate INTEGER, userId INTEGER, gold REAL, claimed INTEGER)");

if (cfg.debug){
	User.disconnectAll();
	console.log('All clients have been disconnected');
}

const Mining = {
	insert: function(endDate, gold, userId){
		db.run("INSERT INTO Mining (endDate, userId, gold, claimed) VALUES (strftime('%s','now'), $userId, $gold, 0)", {
			$endDate: endDate,
			$gold: gold,
			$userId: userId
		});
	}
};

module.exports = Mining;