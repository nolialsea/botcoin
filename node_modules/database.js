const sqlite3 = require('sqlite3');
const cfg = require('configuration');
const fs = require('fs');

let db;

function initDatabase(){
	db = new sqlite3.Database('db.db');
	db.serialize();
	return db;
}

function resetDatabase(callback){
	db.close(err => {
		if (err){
			console.log(err);
		}
		fs.unlinkSync('./db.db');

		callback(initDatabase());
	});
}

module.exports = initDatabase();
module.exports.resetDatabase = resetDatabase;